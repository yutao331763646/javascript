<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/305538 (zh-CN, DDL); Windows/6.1.7600 (Win64);"/>
  <meta name="reminder-order" content="2017/2/3 8:45"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1257"/>

<div>
<span><div><span style="font-size: 19px;"><span style="color: rgb(255, 0, 0);"><b>获取滚动距离的兼容</b></span></span></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.148438);"><div><span style="color: rgb(118, 0, 216);"><b><span style="font-size: 16px;">//非chrome</span></b></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 16px;">document.documentElement.scrollTop   </span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 16px;">document.documentElement.scrollLeft</span></span></div><div><span style="font-size: 16px;"><span style="color: rgb(51, 51, 51);"><br/></span></span></div><div><span style="color: rgb(188, 0, 88);"><b><span style="font-size: 16px;">//chrome</span></b></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 16px;">document.body.scrollTop</span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 16px;">document.body.scrollLeft</span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 16px;"><br/></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 16px;">//兼容写法：由于浏览器只支持其中一种，另一种为0，因此采用相加的方式</span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 16px;">var scrolltop = </span></span><span style="font-size: 16px;">document.documentElement.scrollTop + </span><span style="color: rgb(51, 51, 51);"><span style="font-size: 16px;">document.body.scrollTop</span></span></div><div><span style="font-size: 16px;"><span style="color: rgb(51, 51, 51);"><br/></span></span></div><div><span style="font-size: 16px;"><span style="color: rgb(51, 51, 51);">//更为稳妥的兼容写法：</span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 16px;">var scrolltop = </span></span><span style="font-size: 16px;">document.documentElement.scrollTop <span style="color: rgb(255, 0, 0);">|| </span></span><span style="color: rgb(51, 51, 51);"><span style="font-size: 16px;">document.body.scrollTop</span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 16px;"><br/></span></span></div></div><div><b><span style="font-size: 19px;"><span style="color: rgb(255, 0, 0);"><br/></span></span></b></div><div><span style="font-size: 19px;"><b><span style="color: rgb(255, 0, 0);">getElementsByClassName()</span></b></span></div><div style="box-sizing: border-box; padding: 8px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 16px;">if(!document.getElementsByClassName){ //如果不存在该方法</span></div><div><span style="font-size: 16px;">    document.getElementsByClassName = function(classname){ //则手动创建</span></div><div><span style="font-size: 16px;">          var arr = []; </span></div><div><span style="font-size: 16px;">          var all = document.getElementsByTagName(&quot;*&quot;);</span></div><div><span style="font-size: 16px;">          for(var i=0; i&lt;all.length; i++){</span></div><div><span style="font-size: 16px;">               if(all[i].className.indexOf(classname+&quot; &quot;) != -1){</span></div><div><span style="font-size: 16px;">                    arr.push(all[i]); </span></div><div><span style="font-size: 16px;">               }<br/></span></div><div><span style="font-size: 16px;">          }</span></div><div><span style="font-size: 16px;">          return arr;<br/></span></div><div><span style="font-size: 16px;">    } <br/></span></div><div><span style="font-size: 16px;">}</span></div></div><div><b><span style="font-size: 19px;"><span style="color: rgb(255, 0, 0);"><br/></span></span></b></div><div><b><span style="font-size: 19px;"><span style="color: rgb(255, 0, 0);">JS获取非行内样式</span></span></b></div><div style="box-sizing: border-box; padding: 8px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.148438);"><div><span style="font-size: 16px;">window.getComputedStyle(ele, null)      <span style="color: rgb(166, 0, 196);">//非IE</span></span></div><div><span style="font-size: 16px;">ele.currentStyle      <span style="color: rgb(255, 0, 0);">//IE</span></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">function getStyle(obj, attr) {</span></div><div><span style="font-size: 16px;">    if(obj.currentStyle) { //IE浏览器</span></div><div><span style="font-size: 16px;">        return obj.currentStyle[attr];</span></div><div><span style="font-size: 16px;">    } else {</span></div><div><span style="font-size: 16px;">        return getComputedStyle(obj,null)[attr];</span></div><div><span style="font-size: 16px;">    }</span></div><div><span style="font-size: 16px;">}</span></div></div><div><b><span style="font-size: 19px;"><span style="color: rgb(255, 0, 0);"><br/></span></span></b></div><div><span style="color: rgb(255, 0, 0);"><span style="font-size: 19px;"><b>获取Event对象的兼容写法</b></span></span></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 16px;">obj.xxxx = function(evt){</span></span></div><div><span style="font-size: 16px;">     var e = evt || window.event;</span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 16px;">}</span></span></div></div><div><b><span style="font-size: 19px;"><span style="color: rgb(255, 0, 0);"><br/></span></span></b></div><div><b><span style="font-size: 19px;"><span style="color: rgb(255, 0, 0);">全世界最短IE6判定</span></span></b></div><div style="box-sizing: border-box; padding: 8px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.148438);"><div><span style="font-size: 16px;">if(!-[1,]) { <span style="color: rgb(166, 0, 196);">//IE6</span></span></div><div><span style="font-size: 16px;">     <br/></span></div><div><span style="font-size: 16px;">} else{ <span style="color: rgb(241, 79, 154);">//非IE6</span></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">}</span></div></div><div><b><span style="font-size: 19px;"><span style="color: rgb(255, 0, 0);"><br/></span></span></b></div><div><b><span style="font-size: 19px;"><span style="color: rgb(255, 0, 0);">全世界最无争议IE判定</span></span></b></div><div style="box-sizing: border-box; padding: 8px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 16px;">if(window.VBArray){</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">} else {</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">}</span></div></div><div><br/></div><div><b><span style="font-size: 19px;"><span style="color: rgb(255, 0, 0);">键盘码获取</span></span></b></div><div style="box-sizing: border-box; padding: 8px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.148438);"><div><span style="font-size: 16px;">e.keyCode || e.which</span></div></div><div><b><span style="font-size: 19px;"><span style="color: rgb(255, 0, 0);"><br/></span></span></b></div><div><b><span style="font-size: 19px;"><span style="color: rgb(255, 0, 0);">阻止事件传播</span></span></b></div><div style="box-sizing: border-box; padding: 8px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 16px;">e.stopPropagation ? e.stopPropagation() : e.cancelBubble = true;</span></div></div><div><b><span style="font-size: 19px;"><span style="color: rgb(255, 0, 0);"><br/></span></span></b></div><div><b><span style="font-size: 19px;"><span style="color: rgb(255, 0, 0);">event.target</span></span></b></div><div style="box-sizing: border-box; padding: 8px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 16px;">var srcObj = event.target || event.srcElement;</span></div></div><div><b><span style="font-size: 19px;"><span style="color: rgb(255, 0, 0);"><br/></span></span></b></div><div><b><span style="font-size: 19px;"><span style="color: rgb(255, 0, 0);">阻止默认行为</span></span></b></div><div style="box-sizing: border-box; padding: 8px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 16px;">event.preventDefault();</span></div><div><span style="font-size: 16px;">event.returnValue = false;</span></div><div><span style="font-size: 16px;">e.preventDefault ? e.preventDefault() : e.returnValue=false;</span></div></div><div><b><span style="font-size: 19px;"><span style="color: rgb(255, 0, 0);"><br/></span></span></b></div><div><b><span style="font-size: 19px;"><span style="color: rgb(255, 0, 0);">事件监听</span></span></b></div><div style="box-sizing: border-box; padding: 8px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 16px;">obj.<span style="color: rgb(255, 0, 0);">addEventListener</span>(&quot;click&quot;,function(){},true);   //非IE</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">obj.<span style="color: rgb(235, 0, 115);">attachEvent</span>(&quot;onclick&quot;, function(){});      <span style="color: rgb(235, 0, 115);">//IE</span></span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 15px;">function addEvent(ele, eventType, func, isCapture){</span></div><div><span style="font-size: 15px;">     if(ele &amp;&amp; ele.attachEvent){</span></div><div><span style="font-size: 15px;">          ele.attachEvent(&quot;on&quot;+eventType, func);</span></div><div><span style="font-size: 15px;">     } else {</span></div><div><span style="font-size: 15px;">          ele.addEventListener(eventType, func, isCapture||false);</span></div><div><span style="font-size: 15px;">     }</span></div><div><span style="font-size: 15px;">}</span></div></div><div><span style="font-size: 16px;"><br/></span></div></div><div><b><span style="font-size: 19px;"><span style="color: rgb(255, 0, 0);"><br/></span></span></b></div><div><b><span style="font-size: 19px;"><span style="color: rgb(255, 0, 0);">函数柯里化</span></span></b></div><div style="box-sizing: border-box; padding: 8px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 16px;">var addEvent = (function(){</span></div><div><span style="font-size: 16px;">    if(window.attachEvent) {</span></div><div><span style="font-size: 16px;">        return function(obj, eventType, func){</span></div><div><span style="font-size: 16px;">            obj.attachEvent(&quot;on&quot;+eventType, func);</span></div><div><span style="font-size: 16px;">        }</span></div><div><span style="font-size: 16px;">    } else {</span></div><div><span style="font-size: 16px;">        return function(obj, eventType, func,  isCapture) {</span></div><div><span style="font-size: 16px;">            obj.addEventListener(eventType, func, isCapture||false);</span></div><div><span style="font-size: 16px;">        }</span></div><div><span style="font-size: 16px;">    }</span></div><div><span style="font-size: 16px;">})();</span></div></div><div><b><span style="font-size: 19px;"><span style="color: rgb(255, 0, 0);"><br/></span></span></b></div><div><span style="font-size: 19px;"><span style="color: rgb(255, 0, 0);"><b>request对象的兼容</b></span></span></div><div><span style="font-size: 16px;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 16px;">new ActiveXObject(&quot;Msxml2.XMLHTTP&quot;)   <span style="color: rgb(166, 0, 196);">//IE</span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 16px;"><br/></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 16px;">var req = ActiveXObject?</span></span><span style="color: rgb(51, 51, 51);"><span style="font-size: 16px;">new ActiveXObject(&quot;Msxml2.XMLHTTP&quot;):new XMLHttpRequest()</span></span> <span style="color: rgb(51, 51, 51);"><span style="font-size: 16px;">;</span></span></div></div><div><b><span style="font-size: 19px;"><span style="color: rgb(255, 0, 0);"><br/></span></span></b></div><div><b><span style="font-size: 19px;"><span style="color: rgb(255, 0, 0);"><br/></span></span></b></div><div><b><span style="font-size: 19px;"><span style="color: rgb(255, 0, 0);"><br/></span></span></b></div><div><b><span style="font-size: 19px;"><span style="color: rgb(255, 0, 0);"><br/></span></span></b></div></span>
</div></body></html> 