<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE en-export SYSTEM "http://xml.evernote.com/pub/evernote-export2.dtd">
<en-export export-date="20170831T041800Z" application="Evernote/Windows" version="6.x">
<note><title>兼容问题总结</title><content><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE en-note SYSTEM "http://xml.evernote.com/pub/enml2.dtd">

<en-note><div><span style="font-size: 19px;"><span style="font-size: 19px; color: rgb(255, 0, 0); font-weight: bold;">获取滚动距离的兼容</span></span></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(118, 0, 216); font-weight: bold;">//非chrome</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">document.documentElement.scrollTop &nbsp;&nbsp;</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">document.documentElement.scrollLeft</span></div><div><br/></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(188, 0, 88); font-weight: bold;">//chrome</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">document.body.scrollTop</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">document.body.scrollLeft</span></div><div><br/></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">//兼容写法：由于浏览器只支持其中一种，另一种为0，因此采用相加的方式</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">var scrolltop =&nbsp;</span><span style="font-size: 16px; background-color: rgb(251, 250, 248);">document.documentElement.scrollTop +&nbsp;</span><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">document.body.scrollTop</span></div><div><br/></div><div><span style="font-size: 16px;"><span style="background-color: rgb(251, 250, 248); font-size: 16px; color: rgb(51, 51, 51);">//更为稳妥的兼容写法：</span></span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">var scrolltop =&nbsp;</span><span style="font-size: 16px; background-color: rgb(251, 250, 248);">document.documentElement.scrollTop <span style="background-color: rgb(251, 250, 248); font-size: 16px; color: rgb(255, 0, 0);">||&nbsp;</span></span><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">document.body.scrollTop</span></div><div><br/></div></div><div><br/></div><div><span style="font-size: 19px;"><span style="font-size: 19px; font-weight: bold; color: rgb(255, 0, 0);">getElementsByClassName()</span></span></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">if(!document.getElementsByClassName){ //如果不存在该方法</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">&nbsp; &nbsp; document.getElementsByClassName = function(classname){ //则手动创建</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var arr = [];&nbsp;</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var all = document.getElementsByTagName(&quot;*&quot;);</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for(var i=0; i&lt;all.length; i++){</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if(all[i].className.indexOf(classname+&quot; &quot;) != -1){</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; arr.push(all[i]);&nbsp;</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return arr;</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">&nbsp; &nbsp; }&nbsp;</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">}</span></div></div><div><br/></div><div><span style="font-size: 19px;"><span style="font-weight: bold; font-size: 19px; color: rgb(255, 0, 0);">JS获取非行内样式</span></span></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">window.getComputedStyle(ele, null) &nbsp; &nbsp; &nbsp;<span style="background-color: rgb(251, 250, 248); color: rgb(166, 0, 196); font-size: 16px;">//非IE</span></span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">ele.currentStyle &nbsp; &nbsp;&nbsp; <span style="background-color: rgb(251, 250, 248); color: rgb(255, 0, 0); font-size: 16px;">//IE</span></span></div><div><br/></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">function getStyle(obj, attr) {</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">&nbsp; &nbsp; if(obj.currentStyle) { //IE浏览器</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">&nbsp; &nbsp; &nbsp; &nbsp; return obj.currentStyle[attr];</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">&nbsp; &nbsp; } else {</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">&nbsp; &nbsp; &nbsp; &nbsp; return getComputedStyle(obj,null)[attr];</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">&nbsp; &nbsp; }</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">}</span></div></div><div><br/></div><div><span style="font-size: 19px;"><span style="color: rgb(255, 0, 0); font-size: 19px; font-weight: bold;">获取Event对象的兼容写法</span></span></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">obj.xxxx = function(evt){</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var e = evt || window.event;</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">}</span></div></div><div><br/></div><div><span style="font-size: 19px;"><span style="font-weight: bold; font-size: 19px; color: rgb(255, 0, 0);">全世界最短IE6判定</span></span></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">if(!-[1,]) { <span style="background-color: rgb(251, 250, 248); color: rgb(166, 0, 196); font-size: 16px;">//IE6</span></span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">&nbsp; &nbsp; &nbsp;</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">} else{ <span style="background-color: rgb(251, 250, 248); color: rgb(241, 79, 154); font-size: 16px;">//非IE6</span></span></div><div><br/></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">}</span></div></div><div><br/></div><div><span style="font-size: 19px;"><span style="font-weight: bold; font-size: 19px; color: rgb(255, 0, 0);">全世界最无争议IE判定</span></span></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">if(window.VBArray){ &nbsp;//IE6\7\8</span></div><div><br/></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">} else {</span></div><div><br/></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">}</span></div></div><div><br/></div><div><span style="font-size: 19px;"><span style="font-weight: bold; font-size: 19px; color: rgb(255, 0, 0);">键盘码获取</span></span></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">e.keyCode || e.which</span></div></div><div><br/></div><div><span style="font-size: 19px;"><span style="font-weight: bold; font-size: 19px; color: rgb(255, 0, 0);">阻止事件传播</span></span></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">e.stopPropagation ? e.stopPropagation() : e.cancelBubble = true;</span></div></div><div><br/></div><div><span style="font-size: 19px;"><span style="font-weight: bold; font-size: 19px; color: rgb(255, 0, 0);">event.target</span></span></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">var srcObj = event.target || event.srcElement;</span></div></div><div><br/></div><div><span style="font-size: 19px;"><span style="font-weight: bold; font-size: 19px; color: rgb(255, 0, 0);">阻止默认行为</span></span></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">event.preventDefault();</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">event.returnValue = false;</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">e.preventDefault ? e.preventDefault() : e.returnValue=false;</span></div></div><div><br/></div><div><span style="font-size: 19px;"><span style="font-weight: bold; font-size: 19px; color: rgb(255, 0, 0);">事件监听</span></span></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-size: 16px;">obj.</span><span style="background-color: rgb(251, 250, 248); color: rgb(255, 0, 0); font-size: 16px;">addEventListener</span><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-size: 16px;">(&quot;click&quot;,function(){},true); &nbsp; //非IE</span></div><div><br/></div><div><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-size: 16px;">obj.</span><span style="background-color: rgb(251, 250, 248); color: rgb(235, 0, 115); font-size: 16px;">attachEvent</span><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-size: 16px;">(&quot;onclick&quot;, function(){}); &nbsp; &nbsp; &nbsp;</span><span style="background-color: rgb(251, 250, 248); color: rgb(235, 0, 115); font-size: 16px;">//IE</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">function addEvent(ele, eventType, func, isCapture){</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">&nbsp; &nbsp; &nbsp;if(ele &amp;&amp; ele.attachEvent){</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ele.attachEvent(&quot;on&quot;+eventType, func);</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ele.addEventListener(eventType, func, isCapture||false);</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">}</span></div></div><div><br/></div></div><div><br/></div><div><span style="font-size: 19px;"><span style="font-weight: bold; font-size: 19px; color: rgb(255, 0, 0);">函数柯里化</span></span></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">var addEvent = (function(){</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">&nbsp; &nbsp; if(window.attachEvent) {</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">&nbsp; &nbsp; &nbsp; &nbsp; return function(obj, eventType, func){</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; obj.attachEvent(&quot;on&quot;+eventType, func);</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">&nbsp; &nbsp; &nbsp; &nbsp; }</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">&nbsp; &nbsp; } else {</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">&nbsp; &nbsp; &nbsp; &nbsp; return function(obj, eventType, func,&nbsp; isCapture) {</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; obj.addEventListener(eventType, func, isCapture||false);</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">&nbsp; &nbsp; &nbsp; &nbsp; }</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">&nbsp; &nbsp; }</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">})();</span></div></div><div><br/></div><div><span style="font-size: 19px;"><span style="font-size: 19px; color: rgb(255, 0, 0); font-weight: bold;">request对象的兼容</span></span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">new ActiveXObject(&quot;Msxml2.XMLHTTP&quot;) &nbsp; <span style="background-color: rgb(251, 250, 248); color: rgb(166, 0, 196); font-size: 16px;">//IE</span></span></div><div><br/></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">var req = ActiveXObject?</span><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">new ActiveXObject(&quot;Msxml2.XMLHTTP&quot;):new XMLHttpRequest()</span> <span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">;</span></div></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></en-note>]]></content><created>20160906T094316Z</created><updated>20170821T033450Z</updated><note-attributes><author>【千锋互联】JS高级讲师--尹涛</author><reminder-order>20170203T084500Z</reminder-order></note-attributes></note></en-export>
