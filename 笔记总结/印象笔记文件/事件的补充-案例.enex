<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE en-export SYSTEM "http://xml.evernote.com/pub/evernote-export2.dtd">
<en-export export-date="20170831T041619Z" application="Evernote/Windows" version="6.x">
<note><title>事件的补充-案例</title><content><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE en-note SYSTEM "http://xml.evernote.com/pub/enml2.dtd">

<en-note><div><span style="font-size: 19px;"><b>鼠标滚轮事件</b></span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &apos;Courier New&apos;, monospace; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 16px;">FireFox : DOMMouseScroll</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">e.detail &nbsp; 向下滚动为 3 &nbsp; &nbsp; 向上滚动 -3</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">非FireFox : onmousewheel</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">e.wheelDelta &nbsp;向下滚动-120 &nbsp; &nbsp; 向上滚动120</span></div></div><div><br/></div><div>自定义滚动条</div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>&lt;!DOCTYPE html&gt;</div><div>&lt;html lang=&quot;&quot;&gt;</div><div><br/></div><div>&lt;head&gt;</div><div>&nbsp; &nbsp; &lt;meta charset=&quot;utf-8&quot;&gt;</div><div>&nbsp; &nbsp; &lt;title&gt;&lt;/title&gt;</div><div>&nbsp; &nbsp; &lt;style&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; * {&nbsp; &nbsp; margin: 0;padding: 0;}</div><div>&nbsp; &nbsp; &nbsp; &nbsp; html,body {&nbsp; &nbsp; width: 100%;height: 100%;}</div><div>&nbsp; &nbsp; &nbsp; &nbsp; #box { width: 100%; height: 100%; overflow: hidden; }</div><div>&nbsp; &nbsp; &nbsp; &nbsp; .ball { width: 100%; height: 500px; }</div><div>&nbsp; &nbsp; &nbsp; &nbsp; #scroll {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; width: 6px; height: 96%;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; position: fixed; top: 2%; right: 5px;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; border-radius: 3px; background-color: rgba(235, 233, 233, 0.5);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; z-index: 9998; opacity: 0;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; }</div><div>&nbsp; &nbsp; &nbsp; &nbsp; #scrollBar {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; position: absolute; z-index: 9999;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; width: 6px; height: 20px;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; border-radius: 3px;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; left: 0; top: 0; background-color: #383838;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; }</div><div>&nbsp; &nbsp; &lt;/style&gt;</div><div>&lt;/head&gt;</div><div><br/></div><div>&lt;body style=&quot;overflow:hidden;&quot;&gt;</div><div>&nbsp; &nbsp; &lt;div id=&quot;box&quot;&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;div id=&quot;content&quot;&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p class=&quot;ball&quot; style=&quot;background-color:red;&quot;&gt;&lt;/p&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p class=&quot;ball&quot; style=&quot;background-color:blue;&quot;&gt;&lt;/p&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p class=&quot;ball&quot; style=&quot;background-color:yellow;&quot;&gt;&lt;/p&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p class=&quot;ball&quot; style=&quot;background-color:red;&quot;&gt;&lt;/p&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p class=&quot;ball&quot; style=&quot;background-color:blue;&quot;&gt;&lt;/p&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p class=&quot;ball&quot; style=&quot;background-color:yellow;&quot;&gt;&lt;/p&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</div><div>&nbsp; &nbsp; &lt;/div&gt;</div><div>&nbsp; &nbsp; &lt;div id=&quot;scroll&quot;&gt;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &lt;div id=&quot;scrollBar&quot;&gt;&lt;/div&gt;</div><div>&nbsp; &nbsp; &lt;/div&gt;</div><div>&lt;/body&gt;</div><div><br/></div><div>&lt;/html&gt;</div><div>&lt;script type=&quot;text/javascript&quot;&gt;</div><div>&nbsp; &nbsp; var content = document.getElementById(&quot;content&quot;);</div><div>&nbsp; &nbsp; var box = document.getElementById(&quot;box&quot;);</div><div>&nbsp; &nbsp; var scroll = document.getElementById(&quot;scroll&quot;);</div><div>&nbsp; &nbsp; var scrollBar = document.getElementById(&quot;scrollBar&quot;);</div><div>&nbsp; &nbsp; var Step = {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; value : 0,</div><div>&nbsp; &nbsp; &nbsp; &nbsp; size : 20,</div><div>&nbsp; &nbsp; &nbsp; &nbsp; maxVal : Math.ceil((content.offsetHeight-document.body.offsetHeight)/20),</div><div>&nbsp; &nbsp; &nbsp; &nbsp; getCurrentVal:function(){</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return this.value;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; },</div><div>&nbsp; &nbsp; &nbsp; &nbsp; next:function(){</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(this.value==this.maxVal) return;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; this.value++;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; },</div><div>&nbsp; &nbsp; &nbsp; &nbsp; pre:function(){</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(this.value==0) return;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; this.value--;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; },</div><div>&nbsp; &nbsp; &nbsp; &nbsp; getDistance:function(){</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return this.getCurrentVal()*this.size;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; },</div><div>&nbsp; &nbsp; &nbsp; &nbsp; update:function(){</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; this.maxVal = Math.ceil((content.offsetHeight-document.body.offsetHeight)/this.size);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; }</div><div>&nbsp; &nbsp; }</div><div><br/></div><div>&nbsp; &nbsp; window.addEventListener(&quot;resize&quot;,function(){</div><div>&nbsp; &nbsp; &nbsp; &nbsp; Step.update();</div><div>&nbsp; &nbsp; });</div><div><br/></div><div>&nbsp; &nbsp; box.addEventListener(&quot;DOMMouseScroll&quot;,scrollfunc);</div><div>&nbsp; &nbsp; box.addEventListener(&quot;mousewheel&quot;, scrollfunc);</div><div>&nbsp; &nbsp; function scrollfunc(e){</div><div>&nbsp; &nbsp; &nbsp; &nbsp; if(e.type==&quot;mousewheel&quot;){ //非FF</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; e.wheelDelta&lt;0?Step.next():Step.pre();</div><div>&nbsp; &nbsp; &nbsp; &nbsp; } else { //FF</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; e.detail&gt;0?Step.next():Step.pre();</div><div>&nbsp; &nbsp; &nbsp; &nbsp; }</div><div>&nbsp; &nbsp; &nbsp; &nbsp; document.title = Step.getCurrentVal();</div><div>&nbsp; &nbsp; &nbsp; &nbsp; box.scrollTop = Math.min(Step.getDistance(),content.offsetHeight-document.body.offsetHeight);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; //计算滚动比例</div><div>&nbsp; &nbsp; &nbsp; &nbsp; var percent = box.scrollTop/(content.offsetHeight-document.body.offsetHeight);</div><div>&nbsp; &nbsp; &nbsp; &nbsp; //显示滚动条</div><div>&nbsp; &nbsp; &nbsp; &nbsp; scroll.style.opacity = 100;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; //计算滚动条的位置</div><div>&nbsp; &nbsp; &nbsp; &nbsp; scrollBar.style.top = (scroll.offsetHeight-scrollBar.offsetHeight)*percent + &quot;px&quot;;</div><div><br/></div><div>&nbsp; &nbsp; }</div><div>&lt;/script&gt;</div></div><div><br/></div></en-note>]]></content><created>20160917T050638Z</created><updated>20170511T082220Z</updated><note-attributes><author>【千锋互联】JS高级讲师--尹涛</author><reminder-order>20170203T093612Z</reminder-order></note-attributes></note></en-export>
