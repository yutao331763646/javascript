<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/305576 (zh-CN, DDL); Windows/6.1.7600 (Win64);"/>
  <meta name="reminder-order" content="2017/2/3 8:36"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1464"/>

<div>
<span><div><div><br/></div><hr/><div><span style="font-size: 19px;"><span style="font-size: 19px; color: rgb(255, 0, 0); font-weight: bold;">let关键字</span></span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); font-weight: bold;">用来替代var 的关键字</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">举例：</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(45, 79, 201);">for(var i=0; i&lt;5; i++){</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(45, 79, 201);">     setTimeout(function(){</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(45, 79, 201);">          alert(i); </span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(45, 79, 201);">     },1000);</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(45, 79, 201);">}</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">你认为弹出的结果是多少？</span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">结果： 5,5,5,5,5</span></span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">是不是跟你认为的0，1，2，3，4不太一样？？？</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">原因就在于，var i=0，定义的不是局部变量，而是全局变量，这里不会形成闭包。</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">再举例：</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(45, 79, 201);">for(var i=0; i&lt;5; i++){</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(45, 79, 201);">     for(var i=0; i&lt;5; i++){</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(45, 79, 201);">          console.log(i);</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(45, 79, 201);">     }  </span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(45, 79, 201);">}</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">你认为打印的结果是多少？</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-weight: bold;">结果： 1 2 3 4 5</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">难到不是打印25次么？</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">原因还是因为，像for循环的大括号，是不会形成作用域的</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(166, 0, 196);">那么如何在一个语句块中定义局部变量呢？</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(166, 0, 196);">那就是使用let,不过目前大多数的ES6只允许在严格模式下使用</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(222, 87, 0);">&quot;use strict&quot;</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(222, 87, 0);">for(let i=0; i&lt;3; i++){</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(222, 87, 0);">     setTimeout(function(){ alert(i) },1000);</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(222, 87, 0);">}</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(166, 0, 196);">我们尝试一下if语句的大括号</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(222, 87, 0);">&quot;use strict&quot;;</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(222, 87, 0);">let a = 10;</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(222, 87, 0);">if(window) {</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(222, 87, 0);">     let a = 100;</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(222, 87, 0);">     console.log(a);</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(222, 87, 0);">}</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(222, 87, 0);">console.log(a)；</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">结果： 100  10</span></div><div><br/></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">从标准的ES6开始，我们有了块级作用域</span></span></div><div><br/></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">例如：</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">function m(){  console.log(&quot;111111111&quot;) }</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">if( flag &gt; 5) {</span></span></div><div><span style="background-color: rgb(251, 250, 248);">     </span><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">function m(){</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">           </span><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">console.log(&quot;2222222222&quot;)</span></span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">     }</span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">}</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">m();</span></span></div><div><br/></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">在ES5中，函数m会在第二次定义时被覆盖。 结果： 222222222222</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">在ES6中，则会出现 111111111111的结果。</span></span></div></div><div><br/></div><div><span style="font-size: 19px;"><span style="font-size: 19px; color: rgb(255, 0, 0); font-weight: bold;">const</span></span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">我们终于可以定义常量了！</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(45, 79, 201); font-weight: bold;">const</span> GD_TYPE_NORMAL = 1;</span></div></div><div><br/></div><div><span style="font-size: 19px;"><span style="font-size: 19px; color: rgb(255, 0, 0); font-weight: bold;">=&gt;箭头函数</span></span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-weight: bold;">这个我个人不推荐使用，待会再说原因，先讲优点！</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">先看区别吧，原来的写法</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(45, 79, 201);">var test = function(x){</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(45, 79, 201);">     return x+2;</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(45, 79, 201);">}</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(166, 0, 196);">使用箭头函数：</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(255, 0, 0);">var test = x=&gt;x+2;</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">看起很简单吧？ 省略了function、return关键字和大括号。  使用方法跟以前一样没区别</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">test(5);  结果： 7</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(166, 0, 196);">还有好处就是，自动绑定this，或者说this指向不发生改变</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">var obj = {</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">     left : 200,</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">     move : function(){</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">          setTimeout(function(){</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">               //this.left = 100;  </span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">               //以前这里不能写this</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">          },1000);</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">     }</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">}</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(166, 0, 196);">使用了箭头函数：</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">var obj = {</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">     left : 200,</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">     move : function(){</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">          setTimeout( <span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(255, 0, 0);">()=&gt;{</span></span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(255, 0, 0);">              this.left = 100;  </span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(255, 0, 0);">          }</span>,1000);</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">     }</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">}</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(166, 0, 196);">当然也有一些缺陷</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">第一：</span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">箭头函数是不能new的，它的设计初衷就跟构造函数不太一样</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">第二：</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">箭头函数如果要返回一个JSON对象，必须用小括号包起来</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">var test = ()=&gt;({id:3, val=20})</span></span></div><div><br/></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">箭头函数现在非常流行，但我个人并不觉得它有那么美好。</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">主要是因为，这样的设计对代码的可读性伤害太大了</span></span></div><div><br/></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">引用国际著名OO专家、敏捷开发创始人 马丁.福勒的一句名言：</span></span></div><div align="justify" style="min-height: 13pt;"><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(166, 0, 196); font-family: 宋体;">任何一个傻瓜都能写出计算器可以理解的代码。惟有写出人类容易理解的代码，才是优秀的程序员。</span></span></div></div><div><br/></div><div><span style="font-size: 15px;"><span style="letter-spacing: normal; orphans: auto; text-align: start; text-indent: 16px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; background-color: rgb(254, 254, 254); font-size: 15px; display: inline !important; color: rgb(118, 0, 216); font-style: normal; font-variant: normal; font-weight: normal;">……我们读代码的时间和写代码的时间比率是10：1。这意味着我们大部分时间都在阅读老代码，</span></span></div><div><span style="font-size: 15px;"><span style="letter-spacing: normal; orphans: auto; text-align: start; text-indent: 16px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; background-color: rgb(254, 254, 254); font-size: 15px; display: inline !important; color: rgb(118, 0, 216); font-style: normal; font-variant: normal; font-weight: normal;">以便于之后新代码的编写。因为读代码占得比重太大了，因此我们希望在阅读代码的时候能够更</span></span></div><div><span style="font-size: 15px;"><span style="letter-spacing: normal; orphans: auto; text-align: start; text-indent: 16px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; background-color: rgb(254, 254, 254); font-size: 15px; display: inline !important; color: rgb(118, 0, 216); font-style: normal; font-variant: normal; font-weight: normal;">加轻松，即便在编写代码的时候需要费点劲。</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">这一段好像也是他老人家说的，我觉得很有道理。</span></span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">省略掉一个function单词，并不能给开发效率提高多少，但牺牲的却是最基本的代码可读性</span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">除了数学运算，我们几乎从来不用符号表示一些复杂的含义。</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">甚至以前有人质疑过JQ关于each方法的设计思想，认为它屏蔽了程序最基本的逻辑，那就是循环</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">代码的可读性收到了严重伤害。不过</span></span><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">我们仔细看看forEach、map、filter这些函数，</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">尽管它们屏蔽了for循环，但分析这些单词的含义：</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">each 每个</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">map 映射（一一对应）</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">filter 过滤</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">它们其实全部都隐含 的表达了遍历的意思。</span></span></div><div><br/></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">回过头来我们再看，从function到=&gt;，这东西连个象形符号都算不上</span></span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">这就是为什么数学有那么多的符号可以用来交流，但我们却从不把它称为</span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">语言</span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">。</span></div><div><br/></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">再举个例子，你看下面这段代码：</span></span></div><div><span style="background-color: rgb(251, 250, 248);">(?:[a-z0-9!#$%&amp;'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&amp;'*+/=?^_`{|}~-]+)*|&quot;(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*&quot;)@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])</span></div><div><br/></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">给你3分钟，能看懂吗？</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">它为什么这么复杂？实际上就是因为它全部都使用了非象形符号表示的</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">因此正则表达式才会成为最难交流以及阅读的编程语言</span></span></div><div><br/></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">但是！</span>我们必须承认，它确实给我们的验证工作提升了百倍以上的效率</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">权衡利弊，我有理由喜欢它</span></span></div><div><br/></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">但是这个箭头函数，在多数情况下，我不推荐使用</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">就像你的代码里不能满屏幕充斥着  </span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">三目运算符   和  Math.max(xx, Math.min(xx, obj) )这样的东西</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">这样真的好吗？</span></span></div><div><br/></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">在写回调的时候，偶尔用用箭头函数，还是不错的</span></span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(118, 0, 216);">[2,3,9,14,8,29,93,30].sort( (a,b) =&gt; a-b );</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); font-weight: bold;">个人观点，仅供参考。</span></div><div><br/></div></div><div><br/></div><div><span style="font-size: 19px;"><span style="font-size: 19px; color: rgb(255, 0, 0); font-weight: bold;">Destructuring 解构</span></span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-weight: bold;">以前我们定义多个变量，可以这样写：</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">var x=10,y=20,z=30;</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-weight: bold;">现在我们可以这样写：</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">let [x,y,z] = [10,20,30];</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">let [x,[a,b],y] = [10,[15,18],20];</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">这并不是在定义数组，而是通过等号两边的结构匹配，进行赋值。</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-weight: bold;">当然，如果你写的不够规范：</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">let [x,y] = [10,20,30]; //结果x=10,y=20</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">let [x,[a,b],y] = [10,[5],20];  //结果x=10,a=5,y=20,b=undefined</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-weight: bold;">浏览器并不会报错，依然赋值成功。</span></div><div><br/></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">甚至可以使用对象来赋值</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">var {id,name,age} = {id:43,name:'yt',age:30}</span></span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(45, 79, 201);">解构赋值的用途：</span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(166, 0, 196);">1 交换变量的值</span> <span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">  </span></span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">[a,b] = [b,a];  //排序可能会常用到</span></span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(166, 0, 196);">2 函数返回多个值，这个功能比较有颠覆性</span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">var [r1,r2,r3] = exec();</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">function exec(){</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">     return [&quot;结果a&quot;,</span></span><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">&quot;结果b&quot;,</span></span><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">&quot;结果c&quot;</span></span> <span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">];</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">}</span></span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(166, 0, 196);">3 函数的参数定义方式, 不用再考虑顺序</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">function exec({time, speed, pos}){</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">}</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); font-weight: bold; line-height: 1.45;">执行函数：</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">exec({</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">     </span><span style="font-size: 15px; background-color: rgb(251, 250, 248);">pos: {x:20,y:55},</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">     </span><span style="font-size: 15px; background-color: rgb(251, 250, 248);">speed: 50,</span> <span style="font-size: 15px; background-color: rgb(251, 250, 248);"> </span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">     time: 2000</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">})</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(166, 0, 196);">默认值也可以顺便带上：</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">function exec({ time=2000, speed=50, pos}){</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">}</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(166, 0, 196);">3 获取数组的指定元素(第一个和最后一个)</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">var {0:head,arr.length-1:last} = arr; </span></div><div><br/></div></div><div><br/></div><div><span style="color: rgb(255, 0, 0); font-weight: bold;">字符串的一些方法</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(166, 0, 196); font-weight: bold;">字符串模板, 使用反引号`表示，使用${变量|函数}嵌入代码</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">$(temp).html(</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">     `你好，我的名字叫<span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(255, 0, 0);">${username}</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">      接下来是我的自我介绍：</span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(255, 0, 0);">${introduce()}</span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">`</span></span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">);</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(255, 0, 0);">使用`反引号包裹的字符串，可以当场模板来使用。</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">利用${ username } 输出变量</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">利用${ introduce() } 执行函数</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(166, 0, 196);">经过测试，字符串模板默认会被转义，因此写入标签的话，会被原样输出</span></div><div><br/></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(222, 87, 0);">新增的一些API方法，比较简单，这里不再介绍。请自行查阅文档</span></div></div><div><br/></div><div><span style="font-size: 19px; font-weight: bold;">写一个自己的模板引擎</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">var template = `&lt;ul&gt;</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 16px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">               </span> <span style="background-color: rgb(251, 250, 248); font-size: 16px; color: rgb(255, 0, 0); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">&lt;%</span> <span style="background-color: rgb(251, 250, 248); font-size: 16px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">for(var i=0; i &lt; data.names.length; i++) {</span> <span style="background-color: rgb(251, 250, 248); font-size: 16px; color: rgb(255, 0, 0); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">%&gt;</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 16px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">                   &lt;li&gt;</span><span style="background-color: rgb(251, 250, 248); font-size: 16px; color: rgb(255, 0, 0); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">&lt;%=</span> <span style="background-color: rgb(251, 250, 248); font-size: 16px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">data.names[i]</span> <span style="background-color: rgb(251, 250, 248); font-size: 16px; color: rgb(255, 0, 0); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">%&gt;</span><span style="background-color: rgb(251, 250, 248); font-size: 16px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">&lt;/li&gt;</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 16px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">               </span> <span style="background-color: rgb(251, 250, 248); font-size: 16px; color: rgb(255, 0, 0); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">&lt;%</span> <span style="background-color: rgb(251, 250, 248); font-size: 16px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">}</span> <span style="background-color: rgb(251, 250, 248); font-size: 16px; color: rgb(255, 0, 0); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">%&gt;</span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">               &lt;/ul&gt;       </span></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">               `;</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">test(template, {names:[&quot;张三&quot;,&quot;李四&quot;,&quot;tony stark&quot;,&quot;hulk&quot;]})</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">function test(temp, obj){</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">    <span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(50, 135, 18); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">//正则处理字符串</span></span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">    temp = temp.replace(/&lt;%=(.+?)%&gt;/g,&quot;`) \n print($1) \n print(`&quot;);</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">    temp = temp.replace(/&lt;%(.+?)%&gt;/g,&quot;`) \n $1 \n print(`&quot;);</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">    temp = &quot;print(`&quot;+temp+&quot;`)&quot;;</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">    <span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(50, 135, 18); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">//经过正则的处理，我们希望模板字符串变成如下形式:</span></span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">  <span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(26, 173, 224); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">  <span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(88, 152, 255); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">/******************************************* </span></span></span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(88, 152, 255); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">    print(`&lt;ul&gt;`)</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(88, 152, 255); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">    for(var i=0; i&lt;data.names.length; i++){</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(88, 152, 255); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">        print(`&lt;li&gt;`) </span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(88, 152, 255); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">        print(data.names[i]) </span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(88, 152, 255); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">        print(`&lt;/li&gt;`)</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(88, 152, 255); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">    }</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(88, 152, 255); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">    print(`&lt;/ul&gt;`)</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(88, 152, 255); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">    *********************************************/</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">    <span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(50, 135, 18); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">//准备一段代码，动态生成一个函数，把刚才准备好的temp代码嵌入当中</span></span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">    var funcStr = `<span style="background-color: rgb(255, 250, 165); font-size: 15px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;-evernote-highlight:true;">(function(data){</span></span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">        <span style="background-color: rgb(255, 250, 165); font-size: 15px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;-evernote-highlight:true;">var strhtml = &quot;&quot;;</span></span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">        <span style="background-color: rgb(255, 250, 165); font-size: 15px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;-evernote-highlight:true;">function print(str){</span></span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">            <span style="background-color: rgb(255, 250, 165); font-size: 15px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;-evernote-highlight:true;">strhtml += str;</span></span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">        <span style="background-color: rgb(255, 250, 165); font-size: 15px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;-evernote-highlight:true;">}</span></span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">       </span> <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 15px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-weight: bold;-evernote-highlight:true;">${temp}</span></span> <span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(50, 135, 18); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">//把temp字符串放入该函数中，形成一个完整的函数</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">        <span style="background-color: rgb(255, 250, 165); font-size: 15px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;-evernote-highlight:true;">return strhtml;</span></span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">   </span> <span style="background-color: rgb(255, 250, 165); font-size: 15px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;-evernote-highlight:true;">})</span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">`;</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(88, 152, 255); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">    /*************这段代码生成后的样子******************</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(88, 152, 255); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">    (function(data){</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(88, 152, 255); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">        var strhtml = &quot;&quot;;</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(88, 152, 255); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">        function print(str){</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(88, 152, 255); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">             strhtml += str;  </span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(88, 152, 255); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">        } </span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(88, 152, 255); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">        print(`&lt;ul&gt;`)</span></span></div><div style="margin-left: 40px;"><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(88, 152, 255); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">   for(var i=0; i&lt;data.names.length; i++){</span></span></div><div style="margin-left: 40px;"><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(88, 152, 255); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">        print(`&lt;li&gt;`)</span></span></div><div style="margin-left: 40px;"><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(88, 152, 255); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">        print(data.names[i])</span></span></div><div style="margin-left: 40px;"><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(88, 152, 255); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">        print(`&lt;/li&gt;`)</span></span></div><div style="margin-left: 40px;"><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(88, 152, 255); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">   }</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(88, 152, 255); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">        print(`&lt;/ul&gt;`)</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(88, 152, 255); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">        return strhtml; </span></span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(88, 152, 255); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">    })</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(88, 152, 255); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">    *********************************************/</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">    <span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(50, 135, 18); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">//使用eval执行代码，生成并返回这个函数</span></span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">    var func = eval(funcStr);</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">    <span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(50, 135, 18); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">//调用这个函数，得到最终的字符串模板</span></span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">    var res = func(obj);</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">    return res;</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">}</span></div><div><br/></div></div><div><br/></div><div><span style="color: rgb(255, 0, 0); font-weight: bold;">Math的一些方法</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(222, 87, 0);">请自行查阅文档</span></div></div><div><br/></div><div><span style="font-size: 16px; color: rgb(255, 0, 0); font-weight: bold;">数组的一些方法</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-weight: bold;">将伪数组转为数组：</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">var list = Array.from(document.getElementsByTagName(&quot;li&quot;));   </span></div><div><br/></div><div><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">复制指定内容覆盖指定内容（指定数组的下标</span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(255, 0, 0); font-weight: bold;">6、7</span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">替换下标</span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(255, 0, 0); font-weight: bold;">2</span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">及以后</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">var arr = [1,2,3,4,5,6,7,8,9,0];</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">arr.copyWithin(2,6,8);</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">//[1,2,</span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(255, 0, 0);">7,8</span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">,5,6,7,8,9,0] </span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-weight: bold;">//find跟过filter差不多，不过在找到符合条件的元素后，返回元素并停止遍历</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">[1, 5, 10, 15].find(function(value, index, arr) {</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">     return value &gt; 9;</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">})</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">// 10</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-weight: bold;">//跟find差不多，不过在找到符合条件的元素后，返回该元素的下标</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">[1, 5, 10, 15].findIndex(function(value, index, arr) {</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">     return value &gt; 9;</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">})</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">// 2</span></div><div><br/></div></div><div><br/></div><div><span style="font-size: 16px; color: rgb(255, 0, 0); font-weight: bold;">Object.assign</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);"><b>合并对象</b></span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">Object.assign({a:1},{b:2},{b:4,c:3});</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">//{a:1,b:4,c:3}</span></div><div><br/></div><div><br/></div><div><font style="font-size: 11pt;"><b>当然合并过程中做的是浅拷贝</b></font></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">var a1 = {</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);"><span>    name: &quot;aaaa&quot;,</span><br/></span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);"><span>    firend: {</span></span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);"><span>    <span>    name: &quot;cccc&quot;</span></span></span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);"><span><span><span>    </span>}</span><br/></span></span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">}</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">var a2 = {</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);"><span>    age : 30</span><br/></span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">}</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">var b = Object.assign(a1,a2)</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">a1.friend == b.friend</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);"><b>对于原型属性忽略</b></span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">var a = {</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">    name: &quot;aaaa&quot;</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">}</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">var b = {</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);"><span>    age : 20</span><br/></span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">}</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">b.__proto__.title = &quot;ma&quot;;</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">var c = Object.assign(a,b);</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">对于不可枚举属性忽略</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">var a = {</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">    name: &quot;aaaa&quot;</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">}</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">var b = {</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">    age : 20</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">}</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">Object.defineProperty(b, &quot;age&quot;, {</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);"><span>    enmuable : false</span><br/></span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">})</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">对于引用类型，只拷贝引用</span></div></div><div><br/></div><div><span style="font-size: 16px; color: rgb(255, 0, 0); font-weight: bold;">第七种数据类型Symbol</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">var s1 = Symbol();</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">var s2 = Symbol();</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">var s3 = Symbol(&quot;abc&quot;);</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">var s4 = Symbol(&quot;abc&quot;)</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-weight: bold;">s1不等于s2    s3不等于s4</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">Symbol函数会生成一个唯一的值</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">可以理解为Symbol类型跟字符串是接近的</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">但每次生成唯一的值，也就是每次都不相等，至于它等于多少，并不重要</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">这对于一些字典变量，比较有用</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">const TYPE = {</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">     SMALL: Symbol(),</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">     MIDDLE:</span> <span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">Symbol()</span> <span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">,</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">     LARGE: </span><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">Symbol(),</span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(54, 101, 238);">     COM_SMALL: </span></span><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">Symbol(),</span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(54, 101, 238);">     COM_MIDDLE: </span></span><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">Symbol()</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">}</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">//以前我们可能会把SMALL、MIDDLE、LARGE赋值为数字或字符串</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">//还要确保它们的值不能发生重复，但现在不用担心了</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">function Create(type){</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">     switch(type){</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">          case</span> <span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(54, 101, 238);">TYPE.SMALL</span> <span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">: {</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">              .....</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">              break; </span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">          }</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">          case</span> <span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(54, 101, 238);">TYPE.MIDDLE</span> <span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">: {</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">              .....</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">              break;</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">          }</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">          case</span> <span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(54, 101, 238);">TYPE.LARGE</span> <span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">: {</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">              .....</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">              break;</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">          }</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">     }</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">}</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">var s = Create(TYPE.MIDDLE);</span></div><div><br/></div></div><div><br/></div><div><span style="font-size: 16px; color: rgb(255, 0, 0); font-weight: bold;">Set和Map集合</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">想当初设计JS的时候，由于有SUN公司人员的参与</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">再加上当时如日中天的JAVA及其优秀的设计，才使得JS语法及内存设计跟JAVA会如此的接近。</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">但JAVA很多优秀的内容，JS不知道为了什么目的并没有引入，例如Set和Map集合</span></div><div><br/></div><div><span style="background-color: rgb(251, 250, 248); font-size: 12pt; color: rgb(51, 51, 51); font-weight: bold;">Set集合，本质上就是对数组的一种包装</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">例如：</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">let imgs = new Set();</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">imgs.add(1）;</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">imgs.add(1）;</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">imgs.add(5）;</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">imgs.add(&quot;5&quot;）;</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">imgs.add(new String(&quot;abc&quot;)）;</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">imgs.add(new String(&quot;abc&quot;)）;</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">打印的结果：</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">1  5  '5'  'abc'  'abc'</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(188, 0, 88);">Set集合是默认去重复的，但前提是两个添加的元素严格相等</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(188, 0, 88);">所以5和&quot;5&quot;不相等，两个new出来的字符串不相等</span></div><div><br/></div><div>如何删除元素 set.delete(key)</div><div>imgs.delete(5);</div><div><br/></div><div>imgs.delete('5');</div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">关于遍历的方法</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-weight: bold;">由于Set集合本质上还是一个map，因此会有以下几种奇怪的遍历方法</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">var imgs = new Set(['a','b','c']);</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(222, 87, 0);">//根据KEY遍历</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">for(let item of imgs.keys()){</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">     console.log(item);</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">}</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">//a</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">//b</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">//c</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(222, 87, 0);">//根据VALUE遍历</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">for(let item of imgs.values()){</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">     console.log(item);</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">}</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">//a</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">//b</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">//c</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(222, 87, 0);">//根据KEY-VALUE遍历</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">for(let item of imgs.entries()){</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">     console.log(item);</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">}</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">//['a','a']</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">//['b','b']</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">//['c','c']</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(222, 87, 0);">//普通for...of循环(for...of跟for-in的区别很明显，就是直接取值，而不再取下标了)</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">for(let item of imgs){</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">     console.log(item);</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">}</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">//a</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">//b</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">//c</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(255, 0, 0);">SET集合没有提供下标方式的访问，因此只能使用for来遍历。</span></div><div><br/></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">// 下面展示了一种极为精巧利用set集合对数组去重的方法</span></span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(166, 0, 196);">var newarr = [...new Set(array)];</span></div><div><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">=============================================================================</span></div><div><br/></div><div><span style="background-color: rgb(251, 250, 248); font-size: 12pt; color: rgb(51, 51, 51); font-weight: bold;">Map集合,即映射</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">let map = new Map();</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">map.set(&quot;S230&quot;, &quot;张三&quot;);</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">map.set(&quot;S231&quot;, &quot;李四&quot;);</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">map.set(&quot;S232&quot;, &quot;王五&quot;);</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">获取某一个元素</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">map.get(&quot;s232&quot;);</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">//王五</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(222, 87, 0);">//循环遍历，配合解构赋值</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">for(let [key,value] of map){</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">     console.log(key,value);</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">}</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">map.has(key);  //返回布尔值，判断是否含有键key</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">map.delete(key);  //删除</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); line-height: 21px;">map.size    //长度</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); line-height: 21px;">map.clear()   //清空</span></div></div><div><br/></div><div><span style="font-size: 16px; color: rgb(255, 0, 0); font-weight: bold;">Promise规范</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">新推出的Promise函数，是一个构造函数，它实际上是对回调函数的一种封装</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">对异步编程的一种改进，当然，如果只是写法上的改进，那就意义不大了。</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">下面我们看看它能解决哪些以前难以解决的问题：</span></span></div><div><br/></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">问题1： 当有两个或以上的ajax请求需要按顺序执行，该如何编写？</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">//以下是伪代码</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">ajax1({</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">     url: &quot;xxxxx&quot;,</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">     success: function(data1){</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">          //在这里，当ajax1完成后，才能开启ajax2 </span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">          ajax2({</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">               url: &quot;xxxxx&quot;,</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">               success: function(data2){</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">                   //第二次完成的回调，可能还有第三个\第四个无止境的嵌套....</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">               }</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">          }); </span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">     },</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">     error: function(msg){</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">         console.log(&quot;请求出现错误:&quot;,msg); </span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">     }</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">});</span></span></div><div><br/></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">而使用promise的写法如下：</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">new Promise(function(resolve, reject){</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">     </span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(54, 101, 238);">ajax1</span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">({</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">          url: &quot;xxxxx&quot;,</span></span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">         </span> success: function(data){</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 15px;">              </span> <span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(166, 0, 196); font-weight: bold;">resolve</span><span style="background-color: rgb(251, 250, 248); font-size: 15px;">();</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">          },</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">          error: function(msg){</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 15px;">               </span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(255, 0, 0); font-weight: bold;">reject</span><span style="background-color: rgb(251, 250, 248); font-size: 15px;">();</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">          }</span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">     });</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">}).</span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(255, 0, 0);">then</span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">(function(){</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">     </span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(54, 101, 238);">ajax2</span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">({</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">          url: &quot;xxxx&quot;,</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">          success: function(data){</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">                </span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">          } </span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">     });</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">}</span></span><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">).</span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(255, 0, 0);">catch</span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">(</span></span><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">function(){</span></span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">    </span> <span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">console.log(&quot;请求出现错误:&quot;,msg);</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">}</span></span><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">);</span></span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(188, 0, 88);">也就是代码被改进成了new Promise(ajax1).then(ajax2).catch()</span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">使用了链式调用代替了嵌套结构。</span></span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(118, 0, 216);">resolve</span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">() 和</span> <span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(255, 0, 0);">reject</span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">() 则意味着成功回调和失败回调的执行。</span></span></div><div><br/></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">如果有三个或更多的ajax请求呢？</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">new Promise(function(resolve, reject){</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">     </span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(54, 101, 238);">ajax1</span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">({</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">          url: &quot;xxxxx&quot;,</span></span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">         </span> success: function(data){</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 15px;">              </span> <span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(166, 0, 196); font-weight: bold;">resolve</span><span style="background-color: rgb(251, 250, 248); font-size: 15px;">();</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">               //use data.......</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">          },</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">          error: function(msg){</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 15px;">               </span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(255, 0, 0); font-weight: bold;">reject</span><span style="background-color: rgb(251, 250, 248); font-size: 15px;">();</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">          }</span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">     });</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">}).</span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(255, 0, 0);">then</span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">(function(){</span></span></div><div style="margin-left: 40px;"><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">return new Promise(function(resolve, reject){</span></span></div><div style="margin-left: 40px;"><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">     </span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(54, 101, 238);">ajax2</span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">({</span></span></div><div style="margin-left: 40px;"><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">          url: &quot;xxxx&quot;,</span></span></div><div style="margin-left: 40px;"><span style="font-size: 15px; background-color: rgb(251, 250, 248);">          success: function(data){</span></div><div style="margin-left: 40px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px;">              </span> <span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(166, 0, 196); font-weight: bold;">resolve</span><span style="background-color: rgb(251, 250, 248); font-size: 15px;">();</span></div><div style="margin-left: 40px;"><span style="font-size: 15px; background-color: rgb(251, 250, 248);">               </span><span style="font-size: 15px; background-color: rgb(251, 250, 248);">//use data.......</span></div><div style="margin-left: 40px;"><span style="font-size: 15px; background-color: rgb(251, 250, 248);">          },</span></div><div style="margin-left: 40px;"><span style="font-size: 15px; background-color: rgb(251, 250, 248);">          error: function(msg){</span></div><div style="margin-left: 40px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px;">               </span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(255, 0, 0); font-weight: bold;">reject</span><span style="background-color: rgb(251, 250, 248); font-size: 15px;">();</span></div><div style="margin-left: 40px;"><span style="font-size: 15px; background-color: rgb(251, 250, 248);">          }</span></div><div style="margin-left: 40px;"><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">     })</span></span></div><div style="margin-left: 40px;"><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">})</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">}</span></span><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">)</span></span><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">.</span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(255, 0, 0);">then</span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">(function(){</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">     </span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(54, 101, 238);">ajax3</span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">({</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">          url: &quot;xxxx&quot;,</span></span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">          success: function(data){</span></div><div><span style="background-color: rgb(251, 250, 248);">                 </span><span style="font-size: 15px; background-color: rgb(251, 250, 248);">//use data.......</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">          },</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">          error: function(msg){</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">                //print msg</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">          }</span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">     })</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">});</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">为了简化代码，我这里将catch方法省略了</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(166, 0, 196);">代码结构大概是这样的：</span> </span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(166, 0, 196); font-weight: bold;">new Promise(ajax1).then(function(){ return</span></span> <span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(166, 0, 196); font-weight: bold;">new Promise(ajax2)</span> <span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(166, 0, 196); font-weight: bold;">}).then(ajax3);</span></div><div><br/></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">如果有第四个请求要顺序执行,则大概写成这样：</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">new Promise(ajax1)</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">.then(</span></span><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">function(){</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">     return</span></span> <span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">new Promise(ajax2)</span></span></div><div><span style="background-color: rgb(251, 250, 248); font-weight: bold;">}</span><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">)</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">.then(</span></span><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">function(){</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">     return</span></span> <span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">new Promise(ajax3)</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">)</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">.then(ajax4);</span></span></div><div><br/></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">从这里仔细观察，可以看出，只有被Promise封装过了，回调才能保证顺序。</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51); font-weight: bold;">也就是Promise（意为承诺）设计的初衷</span></span></div><div><br/></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">但前一个方法必须在它最后，执行resolve()，后一个方法才可以开始。</span></span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">如果执行了reject()，则进入catch()方法。 </span></span></div><div><br/></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">其实这里不能单纯的理解为 resolve就是success，reject就是error</span></span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">现就职于阿里的大名鼎鼎的阮一峰老师，喜欢管它叫状态机，这是非常恰当的叫法。</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(166, 0, 196);">只有理解了它的设计思路，才能明白为什么叫状态机。</span></div><div><br/></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); color: rgb(255, 0, 0);">//我们把代码写的再实际一些</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">new Promise(function(resolve, reject){     <span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(188, 0, 88);">//<span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(188, 0, 88); font-weight: bold;">p1</span></span></span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">          ajax1({</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">                   .........</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(166, 0, 196);">                   resovle()</span> </span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">          });</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">})</span><span style="font-size: 15px; background-color: rgb(251, 250, 248);">.then(function(){</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 15px;">         </span> <span style="background-color: rgb(251, 250, 248); font-size: 15px; font-weight: bold;">return new Promise</span><span style="background-color: rgb(251, 250, 248); font-size: 15px;">(resolve, reject ){  </span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(188, 0, 88);">//<span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(188, 0, 88); font-weight: bold;">p2</span></span></div><div style="margin-left: 40px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px;">          </span><span style="background-color: rgb(251, 250, 248); font-size: 15px; font-weight: bold;">ajax2</span><span style="background-color: rgb(251, 250, 248); font-size: 15px;">({</span></div><div style="margin-left: 40px;"><span style="font-size: 15px; background-color: rgb(251, 250, 248);">                   .........</span></div><div style="margin-left: 40px;"><span style="font-size: 15px; background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(166, 0, 196);">                   resovle()</span> </span></div><div style="margin-left: 40px;"><span style="font-size: 15px; background-color: rgb(251, 250, 248);">          });</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">          }</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">}</span><span style="font-size: 15px; background-color: rgb(251, 250, 248);">).then(</span><span style="font-size: 15px; background-color: rgb(251, 250, 248);">function(){</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 15px;">         </span> <span style="background-color: rgb(251, 250, 248); font-size: 15px; font-weight: bold;">return new Promise</span><span style="background-color: rgb(251, 250, 248); font-size: 15px;">(resolve, reject ){  </span> <span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(188, 0, 88);">//<span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(188, 0, 88); font-weight: bold;">p3</span></span></div><div style="margin-left: 40px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px;">          </span><span style="background-color: rgb(251, 250, 248); font-size: 15px; font-weight: bold;">ajax3</span><span style="background-color: rgb(251, 250, 248); font-size: 15px;">({</span></div><div style="margin-left: 40px;"><span style="font-size: 15px; background-color: rgb(251, 250, 248);">                   .........</span></div><div style="margin-left: 40px;"><span style="font-size: 15px; background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(166, 0, 196);">                   resovle()</span> </span></div><div style="margin-left: 40px;"><span style="font-size: 15px; background-color: rgb(251, 250, 248);">          });</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">          }</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">}</span><span style="font-size: 15px; background-color: rgb(251, 250, 248);">)</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">如果，我们把每一个promise对象都看做一个状态机的话，它实际上只有三种状态</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 15px; font-weight: bold;">进行中</span><span style="background-color: rgb(251, 250, 248); font-size: 15px;">，</span><span style="background-color: rgb(251, 250, 248); font-size: 15px; font-weight: bold;">已完成</span><span style="background-color: rgb(251, 250, 248); font-size: 15px;">，</span><span style="background-color: rgb(251, 250, 248); font-size: 15px; font-weight: bold;">已失败，</span> <span style="background-color: rgb(251, 250, 248); font-size: 15px;">它分别代表了所承诺的回调函数的执行状态。</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">而resolve方法，只是把这个状态机从Pending(进行中) ，改成了Resolved(已完成)</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(188, 0, 88);">由于p2现在依赖了p1，因此，p2会观察p1的状态，直到p1变为Resolved</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(188, 0, 88);">p2才会开始， 但这时then方法返回的不再是p1，而是p2,因此p3会依赖p2的状态</span></div><div><br/></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); font-weight: bold;">问题2： 如果有三个ajax请求，调用顺序无关，但必须保证三个都成功，才能开始第四个？</span></div><div><br/></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); font-family: Tahoma;"><span style="background-color: rgb(251, 250, 248); font-size: 16px; font-family: Tahoma; color: rgb(54, 101, 238);">Promise.all(function(){  </span> // <span style="background-color: rgb(251, 250, 248); font-size: 16px; font-family: Tahoma; font-weight: bold;">p123</span></span></div><div><span style="font-size: 16px;"><span style="background-color: rgb(251, 250, 248); font-size: 16px; color: rgb(54, 101, 238); font-family: Tahoma;">     return [p1,p2,p3];</span></span></div><div><span style="font-size: 16px;"><span style="background-color: rgb(251, 250, 248); font-size: 16px; color: rgb(54, 101, 238); font-family: Tahoma;">}).</span><span style="background-color: rgb(251, 250, 248); font-size: 16px; color: rgb(54, 101, 238); font-family: Tahoma;">then(function(){</span></span></div><div><span style="font-size: 16px;"><span style="background-color: rgb(251, 250, 248); font-size: 16px; color: rgb(54, 101, 238); font-family: Tahoma;">     return p4;</span></span></div><div><span style="font-size: 16px;"><span style="background-color: rgb(251, 250, 248); font-size: 16px; color: rgb(54, 101, 238); font-family: Tahoma;">});</span></span></div><div><br/></div><div><span style="background-color: rgb(251, 250, 248); font-size: 15px;">p4依赖</span><span style="background-color: rgb(251, 250, 248); font-size: 15px; font-weight: bold;">p123</span><span style="background-color: rgb(251, 250, 248); font-size: 15px;">的状态，那么理解了状态机，promise是不是如此简单呢？</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); font-weight: bold;">问题3： 如果有三个ajax请求，只要任意一个成功，则开始第四个？</span></div><div><br/></div><div><span style="font-size: 16px; background-color: rgb(251, 250, 248); font-family: Tahoma;"><span style="background-color: rgb(251, 250, 248); font-size: 16px; font-family: Tahoma; color: rgb(54, 101, 238);">Promise.race(function(){  </span> <span style="background-color: rgb(251, 250, 248); font-size: 16px; font-family: Tahoma; font-weight: bold;">//p123</span></span></div><div><span style="font-size: 16px;"><span style="background-color: rgb(251, 250, 248); font-size: 16px; color: rgb(54, 101, 238); font-family: Tahoma;">     return [p1,p2,p3];</span></span></div><div><span style="font-size: 16px;"><span style="background-color: rgb(251, 250, 248); font-size: 16px; color: rgb(54, 101, 238); font-family: Tahoma;">}).</span><span style="background-color: rgb(251, 250, 248); font-size: 16px; color: rgb(54, 101, 238); font-family: Tahoma;">then(</span></span><span style="font-size: 16px;"><span style="background-color: rgb(251, 250, 248); font-size: 16px; color: rgb(54, 101, 238); font-family: Tahoma;">function(){</span></span></div><div><span style="font-size: 16px;"><span style="background-color: rgb(251, 250, 248); font-size: 16px; color: rgb(54, 101, 238); font-family: Tahoma;">     return p4;</span></span></div><div><span style="font-size: 16px;"><span style="background-color: rgb(251, 250, 248); font-size: 16px; color: rgb(54, 101, 238); font-family: Tahoma;">}</span></span><span style="font-size: 16px;"><span style="background-color: rgb(251, 250, 248); font-size: 16px; color: rgb(54, 101, 238); font-family: Tahoma;">);</span></span></div></div><div><br/></div><div><span style="font-size: 16px; color: rgb(255, 0, 0); font-weight: bold;">Class保留字终于成了关键字</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">终于，我们在有生之年等到class出现了</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">这下，JS看起来更像一个标准的面相对象的语言了</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">以前编写一个构造函数（类）</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">function Pad(color){</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">     this.color = color;</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">}</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">现在的写法跟Java更接近了</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(54, 101, 238);">class</span> Iphone{</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">     </span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(54, 101, 238);">constructor</span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">(color, size){</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">            this.color = color; </span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">            this.size = size;</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">     }</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">     playgame(){</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">            <span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(121, 121, 121);">//.............</span></span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">     }</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">     toString(){</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">           return</span> <span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(166, 0, 196);">`这台手机的颜色是${this.color} 屏幕大小是${this.size}`</span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">;</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">     }</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">}</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">我们定义了一个类，名字叫Iphone</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">通过类生成一个实例：</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">var iphone = new Iphone(&quot;白色&quot;, 5);</span></div><div><br/></div><div><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">其中</span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(54, 101, 238);">constructor</span><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(51, 51, 51);">被称之为构造方法，在我们new 一个对象的时候，自动被调用</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-weight: bold;">不过本质上，JS依然使用了原型来实现，也就是说，这不过是一个新的写法而已</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-weight: bold;">跟以前的构造函数没有区别。</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(166, 0, 196);">要注意的是，使用了class来定义类，必须先定义再使用</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">以前这样写没有问题：</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">new Person();</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">function Person(){</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">}</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">现在这样写报错：</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">new Person();</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">class Person{</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">       constructor(){</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">       }</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">}</span></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">甚至还可以定义一次性的类</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">let person = new class{</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">        constructor(){</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">       </span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">        }</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(54, 101, 238);">}();</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51);">这个类被定义出来，只能实例化一次，跟JAVA的匿名内部类很像</span></div><div><br/></div><div><br/></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(255, 0, 0);">关于继承</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 15px;">class Son</span> <span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(166, 0, 196);">extends</span> <span style="background-color: rgb(251, 250, 248); font-size: 15px;">Father{</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">     constructor(age){</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 15px;">           </span> <span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(166, 0, 196);">super();</span> <span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(188, 0, 88);">//</span><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(188, 0, 88);">这相当于调用了父类的构造方法，类似于传统写法Father.call(this)</span></div><div><span style="font-size: 15px;"><span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(188, 0, 88);">            <span style="background-color: rgb(251, 250, 248); font-size: 15px; color: rgb(255, 0, 0);">//但是</span></span></span><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(255, 0, 0);">这个方法是必须放在第一行先</span><span style="font-size: 15px; background-color: rgb(251, 250, 248); color: rgb(255, 0, 0);">调用</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">            this.age = age;</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">     }</span></div><div><span style="font-size: 15px; background-color: rgb(251, 250, 248);">}</span></div><div><br/></div><div><br/></div></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div style="text-align: center;"><img src="ECMA-Script6_files/公众号.png" type="image/png" data-filename="公众号.png" style="height: auto;"/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></div><div><br/></div><div><br/></div></span>
</div></body></html> 